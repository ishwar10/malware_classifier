from flask import Flask, request,jsonify
import pandas as pd
import numpy as np
from joblib import load
import requests

model=load("./model/d_model.joblib")
print("model_loaded")

app=Flask(__name__)
@app.route("/")
def home():
    return "Welcome to malware detection model API"


@app.route('/predict',methods=['post'])
def predict():
    data=request.get_json(force=True)
    #df=pd.read_json(data)
    inputs=np.array(data['inputs'])
    prediction=model.predict(inputs).tolist()
    return jsonify(prediction)


if __name__ =='__main__':
    app.run(debug=True)